<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Daoyuan's Fast Robots</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Daoyuan Jin</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/img/profile.jpg" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#aboutme">aboutme</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#lab1">lab1</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container-fluid p-0">
            <!-- Home -->
            <section class="resume-section" id="home">
                <div class="resume-section-content">
                    <h1 class="mb-0">
                        ECE5160
                        <span class="text-primary">Fast Robots</span>
                    </h1>
                    <div class="subheading mb-5">
                        Daoyuan Jin · ECE Grad Student ·
                        <a href="dj368@cornell.edu">dj368@cornell.edu</a>
                    </div>
                    <p class="lead mb-5">Hi there. Welcome to my webpage for ECE 5160 Fast Robots. Most of the links here are still under construction...</p>
                    <div class="social-icons">
                        <a class="social-icon" href="#!"><i class="fab fa-linkedin-in"></i></a>
                        <a class="social-icon" href="#!"><i class="fab fa-github"></i></a>
                        <a class="social-icon" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="social-icon" href="#!"><i class="fab fa-facebook-f"></i></a>
                    </div>
                </div>
            </section>
            <hr class="m-0" />

            
            
            <!-- About me -->
            <section class="resume-section" id="aboutme">
                <div class="resume-section-content">
                    <h2 class="mb-5">about me</h2>
                    <p>I'm a graudate student in CAIR lab, Cornell AgriTech. During my free time I'd like to go outdoors.</p>
                    <p class="mb-0">To be continued.</p>
                </div>
            </section>
            <hr class="m-0" />

            <!-- LAB 1 -->
            <section class="resume-section" id="lab1">
                <div class="resume-section-content">
                    <h2 class="mb-5">LAB1: The Artemis board and Bluetooth</h2>

                    <h2 class="mb-5">PART1: The Artemis board</h2>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Lab Objective</h3>
                            <p>This part acts like a introduction to the Artemis board and the Arduino IDE. By testing examples in the library, we gradually become familiar with the process of using Arduino boards.</p>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Prelab</h3>
                            <p>Setup Arduino environment is reletively simple. We first install the Arduino IDE and install the Sparkfun Appollo3 library accodring to the setup instructions. Then hook the Artemis board up to the computer, select a corresponding borad. Now we are good to uploud examples.</p>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Example: Blink it Up</h3>
                            <p>As the first code we tested, the "Blink it up" example turns the LED on and off periodically.</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/353Emwl2QN0" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Example: Serial</h3>
                            <p>In this example we test the serial output and the function of serial monitor. When we send an input to interface, the Artemis board would send it back to the serial monitor as the video shows.</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/CmzyefaJIZQ" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Example: analogRead</h3>
                            <p>In the third example we test the fuction of temperature sensor and the board's ability to read analog values. As you can see in the video, the original "temp" value is around 33.9 Celsius. I hold the board still for a while and the reading goes up a little to 34.0 Celsius.</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/lKkR116vCI0" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Example: MicrophoneOutput</h3>
                            <p>This example tests the function of microphone unit. It has the ability to print out the loudest frequency the board received.</p>
                            <p>Please turn down your volume a little bit before click the video. Thanks for your understanding!</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/2xZcox5h8T4" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">5000-level: Electronic Tuner</h3>
                            <p>On top of the MicrophoneOutput example, I write a code to make the board act like a electronic tuner. As the "Ode To Joy" goes, the board will identify the frequency of each note and print out a "C", "E" or "F" whenever it encounter one. (Unfortunately there are no "A"s in Ode To Joy.) And it will blink for 0.5 second when it hear a "C", which can be noticed in the video.</p>
                            <p>The logic behind is pretty simple. We can search on the internet for the frequencies of musical notes. For example, C5 is 523.25Hz. But in my case, it turns out to be around 526Hz. Due to the deviation in pitch accuracy, and certain overtones produced during the instrument performance, it's hard to fully encode all the musical notes. But it can be an interesting task in the future practice.</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/Ku1s3unY-Mc" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                    <h2 class="mb-5">PART2: Bluetooth</h2>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Lab Objective</h3>
                            <p>The objective of this part is to establish communication between PC and the Artemis board through the Bluetooth connection. On PC side we use Python3 in Jupyter notebook, while on the Artemis side we use the Arduino programming language, which is a simplified version of C/C++. We will get familiar with the process of sending data via Bluetooth that will be useful in future labs.</p>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Prelab</h3>
                            <div class="subheading mb-3">1. Setup</div>
                            <p>PC side: Install Python, Create and Activate Virtual Environment, Install Python Packages, Using Jupyter Server.</p>
                            <p>Artemis side: Install ArduinoBLE, Using ble_arduino.ino.</p>
                            <p>For this 2024 spring class, I'm using Win11 and I went through all the setups and tasks without using WSL, although I still spent some time trying to install it. It turns out that all the errors popped up can be fixed inside Windows11.</p>
                            <div class="subheading mb-3">2. Codebase</div>
                            <p>The Python and Artemis packages are provided to establish a basic communication between PC and the Artemis board through BLE. We will modify on top of the codebase</p>
                            <p>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Workflow</h3>
                            <p>To start with, let me priefly introduce the general workflow of writing a new bluetooth function.</p>
                            <p>On Artemis side: Twosteps. First, add CommandTypes, so that the board can handle commands accordingly. Second, add a case under switch function, define the specific function inside this case. Typical output steps are Serial.print() and Serial.println(), which print out to the serial monitor and send message via bluetooth, respectively.</p>
                            <p>On PC side: add CMD(Enum) in cmd_types.py just like CommandTypes</p>
                            <code>class CMD(Enum):<br>
                                    PING = 0<br>
                                    SEND_TWO_INTS = 1<br>
                                    SEND_THREE_FLOATS = 2<br>
                                    ECHO = 3<br>
                            </code>
                            <p>Use ble.send_command() and ble.receive_string() pair to send and receive message. Or use ble.start_notify() to start a notification handler, which we will cover below.</p>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Establish Bluetooth Connection</h3>                            
                            <p>First, upload the ble_arduino.ino into the board. Once finished, the MAC address will be printed in the serial monitor. Replace the first line in connection.yaml file with this address.</p>
                            <p>Second, in order to differentiate from other students' boards, generate a new Universally Unique Identifier (UUID) by using lines below.</p>
                            <img width="640" height="360" class="img-fluid img-centered" src="assets/img/uuid.png" alt="">
                            <p>Replace the second line in connection.yaml file with this UUID. Replace the BLEService UUID in ble_arduino.ino with this UUID too.</p>
                            <p>Last, run the demo.ipynb notebook to make sure Bluetooth connection is established.</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/rh8XcAS1fWI" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Task1: ECHO</h3>
                            <p>First we write a "ECHO" command to let Artemis send back a signitured string to test the send & receive functions via bluetooth. On PC side the code and result looks like this:</p>
                            <img width="640" height="360" class="img-fluid img-centered" src="assets/img/echo_py.png" alt="">
                            <p>On Artemis side the code looks like this:</p>
                            <img width="640" height="360" class="img-fluid img-centered" src="assets/img/echo_ar.png" alt="">
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Task2: GET TIME MILLIS</h3>
                            <p>On top of string transmission, we use millis() function in Artemis to send back the time information. On PC side the code and result looks like this:</p>
                            <img width="640" height="360" class="img-fluid img-centered" src="assets/img/millis_py.png" alt="">
                            <p>On Artemis side the code looks like this:</p>
                            <img width="640" height="360" class="img-fluid img-centered" src="assets/img/millis_ar.png" alt="">
                        </div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Task3: Notification Handler</h3>
                            <p>When we use ble.receive_string to receive information from Artemis, the entire Python program enters a waiting state and does not handle other tasks, which is very time-consuming in practical use. To address this issue, we developed the Notification Handler function. When we activate this function, the callback function is called to process the information every time Bluetooth receives it, and it does not occupy the thread when there is no new information. The following video shows the specific implementation and result:</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/aDigYVjs5FY" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>


                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">5000-level: Electronic Tuner</h3>
                            <p>On top of the MicrophoneOutput example, I write a code to make the board act like a electronic tuner. As the "Ode To Joy" goes, the board will identify the frequency of each note and print out a "C", "E" or "F" whenever it encounter one. (Unfortunately there are no "A"s in Ode To Joy.) And it will blink for 0.5 second when it hear a "C", which can be noticed in the video.</p>
                            <p>The logic behind is pretty simple. We can search on the internet for the frequencies of musical notes. For example, C5 is 523.25Hz. But in my case, it turns out to be around 526Hz. Due to the deviation in pitch accuracy, and certain overtones produced during the instrument performance, it's hard to fully encode all the musical notes. But it can be an interesting task in the future practice.</p>
                            <div class="embed-contaioner">
                                <iframe width="640" height="360" src="https://www.youtube.com/embed/aDigYVjs5FY" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
            <hr class="m-0" />
            
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
